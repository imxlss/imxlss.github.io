(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{193:function(s,t,a){"use strict";a.r(t);var v=a(0),_=Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"xss-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 攻击")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"xss-攻击的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击的介绍","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 攻击的介绍")]),s._v(" "),a("p",[s._v("XSS 攻击是页面被注入了恶意的代码。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1. 通常页面中包含的用户输入内容都在固定的容器或者属性内，以文本的形式展示。\n2. 攻击者利用这些页面的用户输入片段，拼接特殊格式的字符串，突破原有位置的限制，形成了代码片段。\n3. 攻击者通过在目标网站上注入脚本，使之在用户的浏览器上运行，从而引发潜在风险。\n4. 通过HTML转义，可以防止XSS攻击。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("做了 HTML 转义，并不等于高枕无忧。")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("对于链接跳转，如"),a("code",[s._v('<a href="xxx"')]),s._v("或"),a("code",[s._v('location.href="xxx"')]),s._v("，要检验其内容，禁止以"),a("code",[s._v("javascript:")]),s._v("开头的链接，和其他非法的 scheme。")])]),s._v(" "),a("h3",{attrs:{id:"xss-注入的方法："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-注入的方法：","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 注入的方法：")]),s._v(" "),a("ul",[a("li",[s._v("在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。")]),s._v(" "),a("li",[s._v("在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。")]),s._v(" "),a("li",[s._v("在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。")]),s._v(" "),a("li",[s._v("在标签的 href、src 等属性中，包含"),a("code",[s._v("javascript:")]),s._v("等可执行代码。")]),s._v(" "),a("li",[s._v("在 onload、onerror、onclick 等事件中，注入不受控制代码。")]),s._v(" "),a("li",[s._v("在 style 属性和标签中，包含类似"),a("code",[s._v('background:url("javascript:...")')]),s._v("的代码。")]),s._v(" "),a("li",[s._v("在 style 属性和标签中，包含类似"),a("code",[s._v("expression(...)")]),s._v("的 css 表达式代码。")])]),s._v(" "),a("h2",{attrs:{id:"xss-攻击的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击的分类","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 攻击的分类")]),s._v(" "),a("h3",{attrs:{id:"什么是-xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-xss","aria-hidden":"true"}},[s._v("#")]),s._v(" 什么是 XSS")]),s._v(" "),a("p",[s._v("XSS(跨站脚本攻击)，是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 cookie、sessionID 等，进而危害数据安全。")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("XSS 的本质是：恶意代码未经过滤，与网站的正常代码混在一起；浏览器无法分辨哪些脚本是可信的，导致恶意脚本被执行。")])]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("而由于直接在用户的终端执行，恶意代码能够直接获取用户的信息，或者利用这些信息冒充用户向网站发起攻击者定义的请求。")])]),s._v(" "),a("h3",{attrs:{id:"xss-的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-的分类","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 的分类")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("根据攻击的来源，XSS 攻击可分为存储型、反射型和 DOM 型三种。")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("类型")]),s._v(" "),a("th",[s._v("存储区")]),s._v(" "),a("th",[s._v("插入点")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("存储型 XSS")]),s._v(" "),a("td",[s._v("后端数据库")]),s._v(" "),a("td",[s._v("HTML")])]),s._v(" "),a("tr",[a("td",[s._v("反射型 XSS")]),s._v(" "),a("td",[s._v("URL")]),s._v(" "),a("td",[s._v("HTML")])]),s._v(" "),a("tr",[a("td",[s._v("DOM 型 XSS")]),s._v(" "),a("td",[s._v("后端数据库/前端存储/URL")]),s._v(" "),a("td",[s._v("前端 JavaScript")])])])]),s._v(" "),a("ul",[a("li",[s._v("存储区：恶意代码存放的位置。")]),s._v(" "),a("li",[s._v("插入点：由谁取得恶意代码，并插入到网页上。")])]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。")])]),s._v(" "),a("p",[s._v("存储型 XSS 常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。\n反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。")]),s._v(" "),a("h4",{attrs:{id:"dom-型-xss-的攻击步骤："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom-型-xss-的攻击步骤：","aria-hidden":"true"}},[s._v("#")]),s._v(" DOM 型 XSS 的攻击步骤：")]),s._v(" "),a("ul",[a("li",[s._v("攻击者构造出特殊的 URL，其中包含恶意代码。")]),s._v(" "),a("li",[s._v("用户打开带有恶意代码的 URL。")]),s._v(" "),a("li",[s._v("用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。")]),s._v(" "),a("li",[s._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户行为，调用目标网站接口执行攻击者指定的操作。")])]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("DOM 型 XSS 和其他两种的区别：DOM 型 XSS 攻击中。取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞。另两种属于服务端的漏洞。")])]),s._v(" "),a("h2",{attrs:{id:"xss-攻击的预防"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击的预防","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 攻击的预防")]),s._v(" "),a("h4",{attrs:{id:"xss-攻击有两大要素："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击有两大要素：","aria-hidden":"true"}},[s._v("#")]),s._v(" XSS 攻击有两大要素：")]),s._v(" "),a("ol",[a("li",[s._v("攻击者提交恶意代码。")]),s._v(" "),a("li",[s._v("浏览器执行恶意代码。")])]),s._v(" "),a("p",[s._v("输入侧过滤并非完全可靠，所以我们要通过“防止浏览器执行恶意代码”来防范 XSS。分两类：")]),s._v(" "),a("ul",[a("li",[s._v("防止 HTML 中出现注入。")]),s._v(" "),a("li",[s._v("防止 Javascript 执行时，执行恶意代码。")])]),s._v(" "),a("hr"),s._v(" "),a("h4",{attrs:{id:"预防存储型和反射型的-xss-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预防存储型和反射型的-xss-攻击","aria-hidden":"true"}},[s._v("#")]),s._v(" 预防存储型和反射型的 XSS 攻击")]),s._v(" "),a("ul",[a("li",[s._v("纯前端渲染，代码和数据分隔开。")]),s._v(" "),a("li",[s._v("对 HTML 做充分转义。")])]),s._v(" "),a("h4",{attrs:{id:"预防-dom-型-xss-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预防-dom-型-xss-攻击","aria-hidden":"true"}},[s._v("#")]),s._v(" 预防 DOM 型 XSS 攻击")]),s._v(" "),a("p",[s._v("DOM 型 XSS 攻击，实际上就是网站前端 JavaScript 代码本身不够严谨，把不可信的数据当作代码执行了。")]),s._v(" "),a("h2",{attrs:{id:"一些安全措施"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些安全措施","aria-hidden":"true"}},[s._v("#")]),s._v(" 一些安全措施")]),s._v(" "),a("ul",[a("li",[s._v("HTTP-only Cookie:禁止 JavaScript 读取某些敏感 Cookie，攻击者完成 XSS 注入后也无法窃取此 Cookie。")]),s._v(" "),a("li",[s._v("验证码：防止脚本冒充用户提交危险操作。")])])])}],!1,null,null,null);t.default=_.exports}}]);