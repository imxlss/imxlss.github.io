(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{198:function(e,s,t){"use strict";t.r(s);var a=t(0),r=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"http-访问控制（cors）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-访问控制（cors）","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTP 访问控制（CORS）")]),e._v(" "),t("p",[e._v("跨域资源共享（CORS）是一种机制，它使用额外的 HTTP 头来告诉浏览器，让运行在一个 origin(domain)上的 Web 应用被准许访问来自不同源服务器上的指定的资源。")]),e._v(" "),t("h3",{attrs:{id:"跨域是什么？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跨域是什么？","aria-hidden":"true"}},[e._v("#")]),e._v(" 跨域是什么？")]),e._v(" "),t("p",[e._v("当一个页面从 与该页面本身所在的服务器有不同的"),t("code",[e._v("域名")]),e._v("、"),t("code",[e._v("协议")]),e._v("或"),t("code",[e._v("端口")]),e._v("的服务器上 请求一个资源时，就会发起一个跨域请求。")]),e._v(" "),t("p",[e._v("浏览器的同源策略：出于安全原因，浏览器限制"),t("code",[e._v("从脚本内发起的")]),e._v("跨域 HTTP 请求。")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("不一定是浏览器限制了跨域请求的发起，也可能是跨域请求正常发起了，但浏览器拦截了返回结果。")])]),e._v(" "),t("h2",{attrs:{id:"http-响应首部字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-响应首部字段","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTP 响应首部字段")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Allow-Origin")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Allow-Origin:")]),e._v(" <origin> | *\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("code",[e._v("origin")]),e._v("参数的值指定了允许访问该资源的外域 URL。对于不需要携带身份凭证的请求，服务器可以指定该字段的值为通配符，表示允许来自所有域的请求。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Allow-Credentials")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Allow-Credentials:")]),e._v(" true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("code",[e._v("Access-Control-Allow-Credentials")]),e._v("指定了当浏览器的"),t("code",[e._v("credentials")]),e._v("设置为 true 时，是否允许浏览器读取"),t("code",[e._v("response")]),e._v("的内容。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Expose-Headers")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Expose-Headers:")]),e._v(" X-My-Custom-Header, X-Another-Custom-Header\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("跨域访问时，"),t("code",[e._v("XMLHttpRequest")]),e._v("对象的"),t("code",[e._v("getResponseHeader()")]),e._v("方法只能拿到最基本的响应头。如果要访问其他的响应头，则需要服务器设置本响应头。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Max-Age")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Max-Age:")]),e._v(" <delta-seconds>\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用于预检请求。指定了预检请求的结果多长时间内有效。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Allow-Methods")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Allow-Methods:")]),e._v(" <method>, ...\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用于预检请求。指明了实际请求所允许使用的 HTTP 方法。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Allow-Headers")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Allow-Headers:")]),e._v(" <field-name>, ...\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用于预检请求。指明了实际请求中允许携带的首部字段。")]),e._v(" "),t("h2",{attrs:{id:"http-请求首部字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-请求首部字段","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTP 请求首部字段")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("当使用"),t("code",[e._v("XMLHttpRequest")]),e._v("对象发起跨域请求时，以下首部字段会被自动设置。")])]),e._v(" "),t("ul",[t("li",[e._v("Origin")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Origin:")]),e._v(" <origin>\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("code",[e._v("origin")]),e._v("参数值为源站 URI。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Request-Method")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Request-Method:")]),e._v(" <method>\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用于预检请求。把实际请求要用的 HTTP 方法告诉服务器。")]),e._v(" "),t("ul",[t("li",[e._v("Access-Control-Request-Headers")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Access-Control-Request-Headers:")]),e._v(" <field-name>, ...\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用于预检请求。将实际请求要带的首部字段告诉服务器。")])])}],!1,null,null,null);s.default=r.exports}}]);